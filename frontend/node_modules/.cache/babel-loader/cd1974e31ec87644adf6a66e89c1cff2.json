{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\javie\\\\Documents\\\\UNI\\\\TFG\\\\control-de-presencia\\\\frontend\\\\src\\\\App.js\",\n    _s = $RefreshSig$();\n\nimport Header from \"./Header\";\nimport Barra from \"./Barra.js\";\nimport Pedidos from \"./Pedidos\";\nimport Productos from \"./Productos\";\nimport Detalle from \"./Detalle\";\nimport Transportista from \"./Transportista\";\nimport Login from \"./Login\";\nimport { useState, useEffect } from \"react\";\nimport { Route, Routes, useLocation } from \"react-router-dom\";\nimport 'bootstrap-icons/font/bootstrap-icons.css';\nimport CONFIG from \"./config/config\";\nimport { mockdata } from \"./constants/productos\";\nimport './css/App.css';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nconst USE_SERVER = CONFIG.use_server;\n\nfunction App() {\n  _s();\n\n  const [productos, setProductos] = useState();\n  const [login, setLogin] = useState(true);\n  const [email, setEmail] = useState('');\n  const [rol, setRol] = useState('');\n  let location = useLocation();\n\n  const download = async () => {\n    if (USE_SERVER) {\n      try {\n        const res = await fetch(\"http://localhost:8080\" + location.pathname);\n        const data = await res.json();\n        setProductos(data);\n      } catch (e) {\n        console.log(\"No se ha podido recuperar.\");\n      }\n    } else {\n      setProductos(mockdata.productos);\n    }\n  };\n\n  useEffect(() => {\n    async function fetchData() {\n      await download();\n    }\n\n    if (!login) fetchData(); // eslint-disable-next-line react-hooks/exhaustive-deps \n  }, [login]);\n\n  function handleEmail(event) {\n    setEmail(event.target.value);\n  }\n\n  function handleRol(event) {\n    setRol(event.target.value);\n  }\n\n  ;\n\n  const cambio_estado = (value, id_prod, id_ped) => {\n    let aux = productos.map(producto => {\n      if (producto.id !== id_prod || producto.pedido !== id_ped) {\n        return producto;\n      }\n\n      producto.estado = value;\n      return producto;\n    });\n    setProductos(aux);\n  };\n\n  async function updateData(ruta, newData) {\n    try {\n      const response = await fetch(\"http://localhost:8080\" + ruta, {\n        method: 'PUT',\n        headers: {\n          'Content-Type': 'application/json'\n        },\n        body: JSON.stringify(newData)\n      });\n      const result = await response.json();\n      console.log(result);\n    } catch (error) {\n      console.error(error);\n    }\n  }\n\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"App\",\n    children: login ? /*#__PURE__*/_jsxDEV(Login, {\n      email: email,\n      rol: rol,\n      handleEmail: handleEmail,\n      handleRol: handleRol,\n      setLogin: setLogin\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 91,\n      columnNumber: 7\n    }, this) : /*#__PURE__*/_jsxDEV(_Fragment, {\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"barra\",\n        children: /*#__PURE__*/_jsxDEV(Barra, {\n          email: email\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 95,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 94,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"principal\",\n        children: [/*#__PURE__*/_jsxDEV(Header, {\n          email: email,\n          rol: rol\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 99,\n          columnNumber: 11\n        }, this), productos && /*#__PURE__*/_jsxDEV(Routes, {\n          children: [/*#__PURE__*/_jsxDEV(Route, {\n            path: \"/cliente/:clienteId\",\n            element: /*#__PURE__*/_jsxDEV(Pedidos, {\n              productos: productos,\n              email: email\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 101,\n              columnNumber: 57\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 101,\n            columnNumber: 11\n          }, this), /*#__PURE__*/_jsxDEV(Route, {\n            path: \"/cliente/:clienteId/:pedidoId\",\n            element: /*#__PURE__*/_jsxDEV(Productos, {\n              productos: productos,\n              email: email\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 102,\n              columnNumber: 67\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 102,\n            columnNumber: 11\n          }, this), /*#__PURE__*/_jsxDEV(Route, {\n            path: \"/cliente/:clienteId/:pedidoId/:productoId\",\n            element: /*#__PURE__*/_jsxDEV(Detalle, {\n              productos: productos,\n              email: email\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 103,\n              columnNumber: 79\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 103,\n            columnNumber: 11\n          }, this), /*#__PURE__*/_jsxDEV(Route, {\n            path: \"/transportista/:matricula\",\n            element: /*#__PURE__*/_jsxDEV(Transportista, {\n              productos: productos,\n              cambio_estado: cambio_estado,\n              actualiza: updateData\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 104,\n              columnNumber: 63\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 104,\n            columnNumber: 11\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 100,\n          columnNumber: 23\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 98,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 89,\n    columnNumber: 3\n  }, this);\n}\n\n_s(App, \"IhKBiBFwHYGp0fTZtB+GZZ3CQlc=\", false, function () {\n  return [useLocation];\n});\n\n_c = App;\nexport default App;\n\nvar _c;\n\n$RefreshReg$(_c, \"App\");","map":{"version":3,"names":["Header","Barra","Pedidos","Productos","Detalle","Transportista","Login","useState","useEffect","Route","Routes","useLocation","CONFIG","mockdata","USE_SERVER","use_server","App","productos","setProductos","login","setLogin","email","setEmail","rol","setRol","location","download","res","fetch","pathname","data","json","e","console","log","fetchData","handleEmail","event","target","value","handleRol","cambio_estado","id_prod","id_ped","aux","map","producto","id","pedido","estado","updateData","ruta","newData","response","method","headers","body","JSON","stringify","result","error"],"sources":["C:/Users/javie/Documents/UNI/TFG/control-de-presencia/frontend/src/App.js"],"sourcesContent":["import Header from \"./Header\";\r\nimport Barra from \"./Barra.js\";\r\nimport Pedidos from \"./Pedidos\";\r\nimport Productos from \"./Productos\";\r\nimport Detalle from \"./Detalle\";\r\nimport Transportista from \"./Transportista\";\r\nimport Login from \"./Login\";\r\n\r\nimport {useState, useEffect} from \"react\";\r\nimport { Route, Routes, useLocation } from \"react-router-dom\";\r\n\r\nimport 'bootstrap-icons/font/bootstrap-icons.css';\r\n\r\nimport CONFIG from \"./config/config\";\r\nimport { mockdata } from \"./constants/productos\";\r\n\r\nimport './css/App.css';\r\n\r\nconst USE_SERVER = CONFIG.use_server;\r\n\r\nfunction App() {\r\n  const [productos, setProductos] = useState();\r\n  const [login, setLogin] = useState(true);\r\n  const [email, setEmail] = useState('');\r\n  const [rol, setRol] = useState('');\r\n\r\n\r\n  let location = useLocation();\r\n\r\n  const download = async () => {\r\n    if (USE_SERVER){\r\n      try {\r\n        const res = await fetch(\"http://localhost:8080\"+location.pathname);\r\n        const data = await res.json();\r\n        setProductos(data);\r\n      } catch (e) {\r\n        console.log(\"No se ha podido recuperar.\");\r\n      }\r\n    }else{\r\n      setProductos(mockdata.productos);\r\n    }\r\n  }\r\n  \r\n  useEffect ( () => {\r\n    async function fetchData() {\r\n      await download();\t\r\n    }\r\n    if (!login)\r\n      fetchData();\r\n    // eslint-disable-next-line react-hooks/exhaustive-deps \r\n  }, [login]);\r\n\r\n  function handleEmail(event) {\r\n    setEmail(event.target.value);\r\n  }\r\n\r\n  function handleRol(event) {\r\n    setRol(event.target.value);\r\n  };\r\n\r\n  const cambio_estado = (value, id_prod, id_ped) => {\r\n    let aux = productos.map(producto => {\r\n      if (producto.id !== id_prod || producto.pedido !== id_ped) {\r\n        return producto;\r\n      }\r\n      producto.estado=value;\r\n      return producto;\r\n    })\r\n    setProductos(aux);\r\n  };\r\n\r\n  async function updateData(ruta, newData) {\r\n    try {\r\n      const response = await fetch(\"http://localhost:8080\"+ruta, {\r\n        method: 'PUT',\r\n        headers: {\r\n          'Content-Type': 'application/json'\r\n        },\r\n        body: JSON.stringify(newData)\r\n      });\r\n      const result = await response.json();\r\n      console.log(result);\r\n    } catch (error) {\r\n      console.error(error);\r\n    }\r\n  }\r\n\r\n  return(\r\n  <div className=\"App\">\r\n    {login ? (\r\n      < Login email={email} rol={rol} handleEmail={handleEmail} handleRol={handleRol} setLogin={setLogin}/>\r\n    ) : (\r\n      <>\r\n        <div className=\"barra\">\r\n          < Barra email={email}/>\r\n        </div>\r\n\r\n        <div className=\"principal\">\r\n          < Header email={email} rol={rol}/>\r\n        {productos && < Routes >\r\n          < Route path=\"/cliente/:clienteId\" element= { < Pedidos productos={productos} email={email} /> } />\r\n          < Route path=\"/cliente/:clienteId/:pedidoId\" element= { < Productos productos={productos} email={email} /> } />\r\n          < Route path=\"/cliente/:clienteId/:pedidoId/:productoId\" element= { < Detalle productos={productos} email={email} /> } />\r\n          < Route path=\"/transportista/:matricula\" element= { < Transportista productos={productos} cambio_estado={cambio_estado} actualiza={updateData} /> } />\r\n        </Routes>\r\n        }      \r\n        </div>\r\n    </>\r\n    )}\r\n  </div>\r\n);\r\n}\r\n\r\nexport default App;"],"mappings":"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"},"metadata":{},"sourceType":"module"}